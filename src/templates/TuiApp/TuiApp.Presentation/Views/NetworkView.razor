@using RazorConsole.Components
@using Spectre.Console
@using TuiApp.Presentation.Base
@using TuiApp.Presentation.ViewModels
@inherits RazorConsoleView<NetworkViewModel>

@page "/network"

<Columns>
    <Panel Title="Network Traffic" BorderColor="Color.Cyan1">
        <Rows>
            <Columns>
                <Markup Content="Download:" Foreground="Color.Grey" />
                <Markup Content="@($"{ViewModel.DownloadSpeed:F2} MB/s")" Foreground="Color.Green" />
            </Columns>
            <Columns>
                <Markup Content="Upload:" Foreground="Color.Grey" />
                <Markup Content="@($"{ViewModel.UploadSpeed:F2} MB/s")" Foreground="Color.Blue" />
            </Columns>
            <Columns>
                <Markup Content="Latency:" Foreground="Color.Grey" />
                <Markup Content="@($"{ViewModel.Latency} ms")" Foreground="@ViewModel.GetLatencyColor()" />
            </Columns>

            <Newline />

            <Columns>
                <Markup Content="Packets Sent:" Foreground="Color.Grey" />
                <Markup Content="@ViewModel.PacketsSent.ToString("N0")" Foreground="Color.Yellow" />
            </Columns>
            <Columns>
                <Markup Content="Packets Received:" Foreground="Color.Grey" />
                <Markup Content="@ViewModel.PacketsReceived.ToString("N0")" Foreground="Color.Lime" />
            </Columns>
        </Rows>
    </Panel>

    <Panel Title="Active Connections" BorderColor="Color.Purple">
        <Rows>
            @foreach (var conn in ViewModel.ActiveConnections)
            {
                <Columns>
                    <Markup Content="@conn.Remote" Foreground="Color.White" />
                    <Markup Content="@conn.Protocol" Foreground="Color.Aqua" />
                    <Markup Content="@($"{conn.BytesTransferred:N0} bytes")" Foreground="Color.Yellow" />
                </Columns>
            }
        </Rows>
    </Panel>
</Columns>