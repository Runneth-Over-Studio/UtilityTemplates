@using RazorConsole.Components
@using Spectre.Console
@using TuiApp.Presentation.Base
@using TuiApp.Presentation.ViewModels
@inherits RazorConsoleView<PerformanceViewModel>

@page "/performance"

<Columns>
    <Panel Title="CPU Performance" BorderColor="Color.Blue">
        <Rows>
            <Columns>
                <Markup Content="Current:" Foreground="Color.Grey" />
                <Markup Content="@($"{ViewModel.CpuUsage}%")" Foreground="Color.Aqua" />
            </Columns>
            <Columns>
                <Markup Content="Average:" Foreground="Color.Grey" />
                <Markup Content="@($"{ViewModel.CpuHistory.Average():F1}%")" Foreground="Color.Yellow" />
            </Columns>
            <Columns>
                <Markup Content="Peak:" Foreground="Color.Grey" />
                <Markup Content="@($"{ViewModel.CpuHistory.Max():F1}%")" Foreground="Color.Red" />
            </Columns>

            <Newline />

            <Markup Content="History (last 10 samples):" Foreground="Color.White" />
            <Markup Content="@ViewModel.GetHistoryBar(ViewModel.CpuHistory)" Foreground="Color.Cyan1" />
        </Rows>
    </Panel>

    <Panel Title="Memory Performance" BorderColor="Color.Green">
        <Rows>
            <Columns>
                <Markup Content="Used:" Foreground="Color.Grey" />
                <Markup Content="@($"{ViewModel.MemoryUsage}%")" Foreground="Color.Lime" />
            </Columns>
            <Columns>
                <Markup Content="Total:" Foreground="Color.Grey" />
                <Markup Content="16.0 GB" Foreground="Color.Yellow" />
            </Columns>
            <Columns>
                <Markup Content="Available:" Foreground="Color.Grey" />
                <Markup Content="@($"{16.0 * (100 - ViewModel.MemoryUsage) / 100:F1} GB")" Foreground="Color.Green" />
            </Columns>

            <Newline />

            <Markup Content="History (last 10 samples):" Foreground="Color.White" />
            <Markup Content="@ViewModel.GetHistoryBar(ViewModel.MemoryHistory)" Foreground="Color.Green" />
        </Rows>
    </Panel>
</Columns>

<Newline />

<Panel Title="Process Statistics" BorderColor="Color.Yellow">
    <Rows>
        <Columns>
            <Markup Content="Total Processes:" Foreground="Color.Grey" />
            <Markup Content="@ViewModel.ProcessCount.ToString()" Foreground="Color.White" />
        </Columns>
        <Columns>
            <Markup Content="Threads:" Foreground="Color.Grey" />
            <Markup Content="@ViewModel.ThreadCount.ToString()" Foreground="Color.Cyan1" />
        </Columns>
        <Columns>
            <Markup Content="Handles:" Foreground="Color.Grey" />
            <Markup Content="@ViewModel.HandleCount.ToString()" Foreground="Color.Yellow" />
        </Columns>
    </Rows>
</Panel>